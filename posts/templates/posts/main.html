{% extends 'base.html' %}
{% load app_tags %}
{% block title %}
    posts
{% endblock %}

{% block content %}
    <div class="d-flex justify-content-center flex-column align-items-center mt-4 row gx-0">
        {% for obj in qs %}
            <div class="card border-0" style="width: 35rem;">
                <div class="card-header border-0 pb-0">
                    <div class="d-flex">
                        <div class="flex-shrink-0">
                            <img class="img-xs rounded-circle"
                                 src="{{ obj.author.avatar.url }}"
                                 alt="">
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <div class="d-flex mt-0 align-items-end"><a
                                    href="{% url 'profiles:my-profile-view' profile_id=obj.author.user.id %}"
                                    class="mb-0 link-dark link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">{{ obj.author.get_full_name }}</a>
                                <div class="ml-1">&#183;</div>
                                <small
                                        class="tx-11 text-muted mb-0 ml-1">{{ obj.updated|timesince|upto:',' }}&#46;</small>
                            </div>
                            <p class="">{{ obj.author.country }}</p>
                        </div>
                        <div class="dropdown">
                            <button class="btn p-0" type="button" id="dropdownMenuButton2"
                                    data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                     viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round"
                                     class="feather feather-more-horizontal icon-lg pb-3px">
                                    <circle cx="12" cy="12" r="1"></circle>
                                    <circle cx="19" cy="12" r="1"></circle>
                                    <circle cx="5" cy="12" r="1"></circle>
                                </svg>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                         viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2"
                                         stroke-linecap="round"
                                         stroke-linejoin="round" class="feather feather-meh icon-sm mr-2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="8" y1="15" x2="16" y2="15"></line>
                                        <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                        <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                    </svg>
                                    <span class="">Unfollow</span></a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                         viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2"
                                         stroke-linecap="round"
                                         stroke-linejoin="round"
                                         class="feather feather-corner-right-up icon-sm mr-2">
                                        <polyline points="10 9 15 4 20 9"></polyline>
                                        <path d="M4 20h7a4 4 0 0 0 4-4V4"></path>
                                    </svg>
                                    <span class="">Go to post</span></a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                         viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2"
                                         stroke-linecap="round"
                                         stroke-linejoin="round" class="feather feather-share-2 icon-sm mr-2">
                                        <circle cx="18" cy="5" r="3"></circle>
                                        <circle cx="6" cy="12" r="3"></circle>
                                        <circle cx="18" cy="19" r="3"></circle>
                                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                                    </svg>
                                    <span class="">Share</span></a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                         viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2"
                                         stroke-linecap="round"
                                         stroke-linejoin="round" class="feather feather-copy icon-sm mr-2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                    <span class="">Copy link</span></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <img class="img-fluid" src="{{ obj.image.url }}" alt="">

                    <div class="d-flex post-actions">
                        <form action="{% url 'posts:like-post-view' %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="post_id" value="{{ obj.id }}">
                            <button class="btn btn-link btn-sm" type="submit"><a href=""
                                                                                 class="d-flex align-items-center text-muted mr-4">
                                {% if profile not in obj.liked.all %}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none"
                                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"
                                         class="feather feather-heart icon-md">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                    </svg>

                                {% else %}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="#F44336"
                                         stroke="#F44336" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"
                                         class="feather feather-heart icon-md">
                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                    </svg>

                                {% endif %}
                                <p class="d-none d-md-block ml-2">{{ obj.num_likes }}</p>
                            </a>
                            </button>

                            <button class="btn btn-link btn-sm" type="button">
                                <a href="" class="d-flex align-items-center text-muted mr-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none"
                                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"
                                         class="feather feather-message-square icon-md">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                    <p class="d-none d-md-block ml-2"></p>
                                </a>
                            </button>
                            <button class="btn btn-link btn-sm" type="button">
                                <a href="" class="d-flex align-items-center text-muted">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none"
                                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"
                                         class="feather feather-share icon-md">
                                        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                                        <polyline points="16 6 12 2 8 6"></polyline>
                                        <line x1="12" y1="2" x2="12" y2="15"></line>
                                    </svg>
                                    <p class="d-none d-md-block ml-2"></p>
                                </a>
                            </button>
                        </form>
                    </div>
                </div>
                <div class="card-footer border-top-0  border-bottom">
                    <p>{{ obj.num_likes }} отметок "Нравится"</p>
                    <p class="mb-3 tx-14">{{ obj.content }}</p>
                </div>
            </div>
        {% endfor %}
    </div>


{% endblock %}